<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Template montado</title>
    <style>
      html,body,iframe{height:100%;margin:0;padding:0}
      iframe{width:100%;border:0}
      .header{padding:8px;background:#222;color:#fff;font-family:Arial}
      .header a{color:#9cf;margin-left:12px}
    </style>
  </head>
  <body>
    <div class="header">
      <strong>Template montado</strong>
      <span id="info"></span>
      <a href="/" style="float:right;color:#9cf">Volver</a>
    </div>
    <iframe id="tpl" src=""></iframe>

    <script>
      // URL esperada: /templates/run/<template-name>
      const path = location.pathname || '';
      const parts = path.split('/').filter(Boolean); // ["templates","run","<name>"]
      const name = parts[2] || '';
      const info = document.getElementById('info');
      const iframe = document.getElementById('tpl');

      if (!name) {
        info.textContent = ' — Error: falta nombre del template en la URL';
        iframe.style.display = 'none';
      } else {
        info.textContent = ' — ' + name;
        // Normalizamos: ruta pública que proxyeamos en nginx es /templates/<name>/
        iframe.src = '/templates/' + encodeURIComponent(name) + '/';
      }
    </script>
  </body>
</html>
